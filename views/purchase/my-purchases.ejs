<!-- UNIT 6 SORAYA SKAVINSKI PURCHASE BUTTON -->
<html lang="en">
<link rel="stylesheet" href="/css/purchase.css">

<body>
    <%- include('../partials/navigation') %>

    <main>
      <h1><%= title %></h1>
      <h2>Welcome, <%= accountData.account_firstname %> <%= accountData.account_lastname %>!</h2>

      <div class="accountLink">
        <p><a href="/">Back to Main</a></p>
      </div>

      <% if (Array.isArray(errors) && errors.length > 0) { %>
        <div class="error-messages">
          <ul>
            <% errors.forEach(function(error) { %>
              <li><%= error.msg || error %></li>
            <% }) %>
          </ul>
        </div>
      <% } %>

      <% if (typeof message !== 'undefined') { %>
        <div class="flash-message"><%= message %></div>
      <% } %>

      <% if (purchases && purchases.length > 0) { %>
        <h3>My Purchased Vehicles</h3>
        <table class="purchase-table">
          <thead>
            <tr>
              <th>Purchase Date</th>
              <th>Make</th>
              <th>Model</th>
              <th>Price</th>
            </tr>
          </thead>
          <tbody>
            <% purchases.forEach(function(purchase) { %>
              <tr>
                <td><%= new Date(purchase.purchase_date).toLocaleDateString() %></td>
                <td><%= purchase.inv_make %></td>
                <td><%= purchase.inv_model %></td>
                <td>$<%= purchase.inv_price.toLocaleString() %></td>
              </tr>
              <% }) %>
            </tbody>
          </table>
        <% } else { %>
          <p>You have no purchases yet.</p>
        <% } %>

      </main>

      <%- include("../partials/footer") %>
</body>
</html>
